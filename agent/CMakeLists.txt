# Platform specific flags
if (TARGET_PLATFORM STREQUAL "ugw")
    set(BEEROCKS_PLATFORM "GRX_350")
    set(BEEROCKS_NOTIFY 1)
    set(BEEROCKS_BRIDGE_IFACE "br-lan")
    set(BEEROCKS_BH_WIRE_IFACE "eth1")
    set(BEEROCKS_REPEATER_MODE 1)
    set(BEEROCKS_AUTOMATIC_CREDENTIALS_UNIFY 1)
    set(BEEROCKS_STOP_ON_FAILURE_ATTEMPTS 1)
elseif (TARGET_PLATFORM STREQUAL "rdkb")
    set(BEEROCKS_PLATFORM "GRX_750")
    set(BEEROCKS_NOTIFY 0)
    set(BEEROCKS_BRIDGE_IFACE "brlan0")
    set(BEEROCKS_BH_WIRE_IFACE "nsgmii0")
    set(BEEROCKS_REPEATER_MODE 0)
    set(BEEROCKS_AUTOMATIC_CREDENTIALS_UNIFY 0)
    set(BEEROCKS_STOP_ON_FAILURE_ATTEMPTS 1)
elseif (TARGET_PLATFORM STREQUAL "linux")
    set(BEEROCKS_PLATFORM "linux")
    set(BEEROCKS_NOTIFY 0)
    set(BEEROCKS_BRIDGE_IFACE "br-lan")
    set(BEEROCKS_BH_WIRE_IFACE "eth1")
    set(BEEROCKS_REPEATER_MODE 0)
    set(BEEROCKS_AUTOMATIC_CREDENTIALS_UNIFY 0)
    set(BEEROCKS_STOP_ON_FAILURE_ATTEMPTS 1)
endif()

# FIXME - better to use target_get_property for SOVERSION which is set in the bwl CMakeLists.txt, but for some reason it is not propogated correctly
add_definitions(-DBWL_MODULE_NAME="libbwl.so.${${PROJECT}_VERSION_MAJOR}")
add_definitions(-DBPL_MODULE_NAME="libbpl.so.${${PROJECT}_VERSION_MAJOR}")

add_subdirectory("src/beerocks")
add_subdirectory("config")
